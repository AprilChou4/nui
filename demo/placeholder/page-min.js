Nui.define("placeholder",["util"],function(e){return this.extands("component",{static:{support:function(){return e.supportHtml5("placeholder","input")}},options:{animate:!1,equal:!1,color:"#ccc"},tpl:{wrap:'<strong                     class="nui-placeholder{{if theme}} t-placeholder-{{theme}}{{/if}}" style="                    {{each style val key}}                        {{key}}:{{val}};                    {{/each}}                    " />',elem:'<b style="                    {{each style val key}}                        {{key}}:{{val}};                    {{/each}}                    ">{{text}}</b>'},_init:function(){var e=this;return e.target=e._getTarget(),e.text=$.trim(e.target.attr("placeholder")),e._create()},_create:function(){var t=this,a=t.options;return a.animate&&t.target.removeAttr("placeholder"),a.animate||!a.animate&&!t._self.support()?(t.target.wrap(t._tpl2html(t.tpl.wrap,{theme:a.theme,style:{position:"relative",display:"inline-block",width:t.target.outerWidth()+"px",overflow:"hidden",cursor:"text"}})),t.elem=$(t._tpl2html(t.tpl.elem,{text:t.text,style:function(){var l=t.target.outerHeight(),r=t.target.is("textarea");return{position:"absolute",left:e.getSize(t.target,"l","padding")+e.getSize(t.target,"l")+"px",top:e.getSize(t.target,"t","padding")+e.getSize(t.target,"t")+"px",height:r?"auto":l+"px","line-height":r?"normal":l+"px",color:a.color}}()})).insertAfter(t.target),t._event()):t._setStyle(),t},_setStyle:function(){var e=this;e.options;e.className="nui-placeholder-"+e.index,e.target.addClass(e.className),e._self.style||e._createStyle(),e._createRules()},_createStyle:function(){var e=this,t=document.createElement("style");document.head.appendChild(t),e._self.style=t.sheet},_createRules:function(){var e=this,t=e._self.style,a=e.index;try{t.deleteRule(a)}catch(e){}$.each(["::-webkit-input-placeholder",":-ms-input-placeholder","::-moz-placeholder"],function(l,r){var i="."+e.className+r,n="opacity:1; color:"+(e.options.color||"");try{"addRule"in t?t.addRule(i,n,a):"insertRule"in t&&t.insertRule(i+"{"+n+"}",a)}catch(e){}})},_event:function(){var t=this,a=t.options,l=e.getSize(t.target,"l","padding")+e.getSize(t.target,"l");t._on("click",t.elem,function(){t.target.focus()}),t._on("focus",t.target,function(){a.animate&&t.elem.stop(!0,!1).animate({left:l+10,opacity:"0.5"})}),t._on("blur change",t.target,function(){var e=$.trim(t.target.val());!a.equal&&e==t.text||!e?(t.target.val(""),t.elem.show(),a.animate&&t.elem.stop(!0,!1).animate({left:l,opacity:"1"})):t.elem.hide()}),t._on("keyup keydown",t.target,function(){$.trim(t.target.val())?t.elem.hide():t.elem.show()}),t.target.blur()},_reset:function(){var e=this;e.elem&&(e.elem.remove(),e.target.unwrap(),e.target.attr("placeholder",e.text))}})}),Nui.define("./page",["placeholder"],function(e){return{init:function(){new e({target:":text",color:"#f60"})}}});