Nui.define("./ajax",function(){var e=$.ajax;return function(n){"string"==typeof n&&(n={url:n,dataType:"json"});var a=n.success||$.noop,t=n.error||$.noop;return n.success=function(){a.apply(this,arguments)},n.error=function(){t.apply(this,arguments)},e($.extend(!0,{cache:!1,dataType:"json",statusCode:{404:function(){},502:function(){}}},n))}}),Nui.define("../tpls/seeVoucher",function(){return this.renders("这是查凭证页面，页面完整url是：<% url %>，路径是：<% path %><% if param %><br>参数分别是：<% each param %><% $index %>=<% $value %>，<% /each %><% /if %>")}),Nui.define("./modules/seeVoucher",["../tpls/seeVoucher","template"],function(e,n){return function(a,t,i){$(".m-menu-item a.s-crt").removeClass("s-crt"),a.addClass("s-crt"),t.html(n.render(e,i))}}),Nui.define("../tpls/recordVoucher",function(){return this.renders("这是录凭证页面，页面完整url是：<% url %>，路径是：<% path %>")}),Nui.define("./modules/recordVoucher",["../tpls/recordVoucher","template"],function(e,n){return function(a,t,i){$(".m-menu-item a.s-crt").removeClass("s-crt"),a.addClass("s-crt"),t.html(n.render(e,i))}}),Nui.define("./menu",[{id:"recordVoucher",name:"录凭证",index:!0,icon:"",path:"/voucher/record"},{id:"seeVoucher",name:"查凭证",icon:"",index:!0,path:"/voucher/list/aniu/jser"},{name:"账簿",icon:"",subs:[{id:"summary",name:"总账",icon:"",path:"/books/summary"},{id:"detailed",name:"明细账",icon:"",path:"/books/detailed"},{id:"accountbalance",name:"科目余额表",icon:"",path:"/books/accountbalance"}]}]),Nui.define("../tpls/index",function(){return this.renders('<div class="m-main ui-bgw"><h3 class="ui-bdb ui-fcb"><em class="ui-animate ui-animate-fadeInDown ui-animate-fadeInDown-run1">欢</em><em class="ui-animate ui-animate-fadeInDown ui-animate-fadeInDown-run2">迎</em><em class="ui-animate ui-animate-fadeInDown ui-animate-fadeInDown-run3">使</em><em class="ui-animate ui-animate-fadeInDown ui-animate-fadeInDown-run4">用</em><em class="ui-animate ui-animate-fadeInDown ui-animate-fadeInDown-run5">云</em><em class="ui-animate ui-animate-fadeInDown ui-animate-fadeInDown-run6">记</em><em class="ui-animate ui-animate-fadeInDown ui-animate-fadeInDown-run7">账</em><em class="ui-animate ui-animate-fadeInDown ui-animate-fadeInDown-run8">！</em></h3><ul><% each $list %><% if $value.index %><li><a href="<% $value.path %>" id="<% $value.id %>Index"><em><i class="iconfont ui-animate">&#xe62a;</i></em><span class="ui-animate"><% $value.name %></span></a></li><% /if %><% /each %></ul></div>')}),Nui.define("./modules/index",["../tpls/index","template","../menu"],function(e,n,a){return this.imports("../../style/index"),function(t,i,r){$(".m-menu-item a.s-crt").removeClass("s-crt"),i.html(n.render(e,a))}}),Nui.define("{cpns}/router",function(){return this.extend("component",{static:{_trigger:!1,_domain:location.protocol+"//"+location.host,_paths:{},_params:{},_alias:{},_cache:{},_cacheContainer:{},_replace:function(e){return e.replace(this._domain,"").replace(/^\#\!?/,"").replace(/^([^\/])/,"/$1").replace(/\/$/g,"")},alias:function(e){return $.extend(this._alias,e||{})},_setCache:function(e){var n=this,e=n._oldhash;e&&Nui.each(n._cacheContainer,function(a,t){if(t===e)return n._cache[e]=a.html(),!1})},_change:function(){var e=this,n=location.hash,a=e._replace(n);$.isEmptyObject(e._paths)&&$.isEmptyObject(e._params)||(e._setCache(),Nui.each([e._paths,e._params],function(t,i){var r=!1;if(Nui.each(t,function(t){if(0===i&&a===t.path||1===i&&0===a.indexOf(t.path)){var s=a.replace(t.path,"").replace(/^\//,"");if(s=s?s.split("/"):[],s.length===t.params.length){var u;Nui.each(t.params,function(e,n){u||(u={}),u[e]=s[n]}),e._cacheContainer[n]=t.container;var o=e._cache[n];return t.render(t.target.length?t.target:$(t.target.selector),t.container,{path:t.path,url:a,param:u,cache:o}),e._trigger=r=!0,!1}}}),r)return!1}),e._trigger||Nui.each(e._instances,function(n){if(!e._hasEnter&&!0===n.options.enter)return e._hasEnter=!0,n.target.eq(0).trigger("click"),e._trigger=!0,!1})),e._oldhash=n},_bindHashchange:function(){var e=this;if(Nui.bsie7){var n=function(n){var a=location.hash;return e._oldhash!==a&&!n};setInterval(function(){n()&&e._change()},100),n(!0)}else Nui.win.on("hashchange",function(){e._change()})},trigger:function(){this._trigger||this._change()},$ready:null},options:{path:"",container:null,enter:!1,split:!1,onBefore:null,onRender:null},_init:function(){var e=this,n=e.constructor;e._exec()&&!n._bind&&(n._bind=!0,n._bindHashchange())},_exec:function(){var e=this,n=e.options,a=e.constructor,t=e._getTarget();if(n.path&&t){e.path=e._setpath(n.path),e.container="string"==typeof n.container?Nui.$(n.container):$(n.container);var i=e._getpath();if(i.params.length){for(var r,s=[];r=i.params.shift();)s.push(r),subs=s.join("/:"),a._params[i.path+"/:"+subs]=$.extend({},i,{params:subs.split("/:")});!0===n.split&&(a._paths[i.path]=i)}else a._paths[e.path]=i;return e._event()}},_setpath:function(e){var n=this.constructor;return(e=Nui.trim(e))&&Nui.each(n._alias,function(n,a){e=e.replace(new RegExp("{"+a+"}","g"),n)}),n._replace(e)},_getpath:function(){var e=this,n=e.path,a=e.options,t=n.indexOf("/:"),i={target:e.target,container:e.container,params:[]};return-1!==t?(i.params=n.substr(t+2).split("/:"),i.path=n.substr(0,t)):i.path=n,i.render="function"==typeof a.onRender?a.onRender:$.noop,i},_sethash:function(e){location.hash="#!"+this.constructor._replace(e)},_event:function(){var e=this,n=e.options;return e._on("click",Nui.doc,e.target,function(a,t){var i=function(){e._sethash(t.attr("href"))};return("function"!=typeof n.onBefore||!1!==n.onBefore(t,i))&&(i(),!1)}),e},_reset:function(){var e=this,n=e.constructor;return e._off(),delete n._paths[e.path],delete n._params[e.path],e}})}),Nui.define("./router",["{cpns}/router"],function(e){var n=this;return e({target:"#index",enter:!0,path:"/index",container:".g-main",onRender:n.require("./modules/index")}),e({target:"#recordVoucher, #recordVoucherIndex",path:"/voucher/record",container:".g-main",onRender:n.require("./modules/recordVoucher")}),e({target:"#seeVoucher, #seeVoucherIndex",path:"/voucher/list/:nickname/:career",container:".g-main",split:!0,onRender:n.require("./modules/seeVoucher")}),e}),Nui.define("./tpls/layout",function(){var e=this;return{head:e.renders('<div class="f-fl m-head-main"><% var data = list[0] %><p class="f-fl name"><% data.buname %></p><p class="f-fl month"><% data.buaddress %></p></div>'),menu:e.renders('<% each menu %><dl class="m-menu-item"><dt><a href="<% $value.path || \'javascript:void(0)\' %>"<% if $value.id %> id="<% $value.id %>"<% /if %>><em><i class="iconfont"></i></em><span><% $value.name %></span>   </a></dt><% if $value.subs && $value.subs.length %><dd><% each $value.subs %><a href="<% $value.path %>"<% if $value.id %> id="<% $value.id %>"<% /if %>><span><% $value.name %></span></a><% /each %></dd><% /if %></dl><% /each %>')}}),Nui.define("./render",["./menu","./tpls/layout","template"],function(e,n,a){return function(t){$(".m-headbox").html(a.render(n.head,t)),t.menu=e,$(".m-menu").html(a.render(n.menu,t))}}),Nui.define("./script/page",["./render","./router","./ajax"],function(e,n,a){var t=this;t.imports("../style/base"),t.imports("../style/page"),a({url:"./script/data.json",success:function(a){e(a),n("trigger")}})});